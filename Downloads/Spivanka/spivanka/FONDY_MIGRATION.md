# üîÑ –ú—ñ–≥—Ä–∞—Ü—ñ—è –∑ LiqPay –Ω–∞ Fondy

## –û–≥–ª—è–¥ –∑–º—ñ–Ω

–ü—Ä–æ–µ–∫—Ç Spivanka –±—É–ª–æ —É—Å–ø—ñ—à–Ω–æ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–æ –∑ LiqPay –Ω–∞ Fondy –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –ø–ª–∞—Ç–µ–∂—ñ–≤. Fondy –ø—Ä–æ–ø–æ–Ω—É—î –∫—Ä–∞—â—É —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—é, –±—ñ–ª—å—à–µ –º–µ—Ç–æ–¥—ñ–≤ –æ–ø–ª–∞—Ç–∏ —Ç–∞ –∑—Ä—É—á–Ω–∏–π –≤—ñ–¥–∂–µ—Ç –¥–ª—è —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤.

## üöÄ –©–æ –∑–º—ñ–Ω–∏–ª–æ—Å—è

### ‚úÖ –ù–æ–≤—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏
- `components/modals/FondyModal.tsx` - –Ω–æ–≤–∏–π –º–æ–¥–∞–ª—å–Ω–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è Fondy
- `app/api/payment/fondy/route.ts` - API endpoint –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–ª–∞—Ç–µ–∂—ñ–≤
- `app/api/payment/fondy/callback/route.ts` - callback –¥–ª—è –æ–±—Ä–æ–±–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω—å –≤—ñ–¥ Fondy

### üîÑ –û–Ω–æ–≤–ª–µ–Ω—ñ —Ñ–∞–π–ª–∏
- `components/modals/PaymentModal.tsx` - –∑–∞–º—ñ–Ω–µ–Ω–æ LiqPay –Ω–∞ Fondy
- `services/paymentService.ts` - –æ–Ω–æ–≤–ª–µ–Ω–æ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ Fondy API
- `types/index.ts` - –¥–æ–¥–∞–Ω–æ –ø—ñ–¥—Ç—Ä–∏–º–∫—É `fondy` –≤ PaymentMethod —Ç–∞ `fondyData` –≤ Payment
- `components/pages/DashboardPage.tsx` - –æ–Ω–æ–≤–ª–µ–Ω–æ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø–ª–∞—Ç–µ–∂—ñ–≤
- `app/api/greetings/auto-save/route.ts` - –º–µ—Ç–æ–¥ –ø–ª–∞—Ç–µ–∂—É –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –∑–º—ñ–Ω–µ–Ω–æ –Ω–∞ `fondy`

### üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
- `README.md` - –æ–Ω–æ–≤–ª–µ–Ω–æ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Fondy
- `INSTALL.md` - –¥–æ–¥–∞–Ω–æ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –∑ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Fondy
- `env.example` - –¥–æ–¥–∞–Ω–æ –∑–º—ñ–Ω–Ω—ñ –¥–ª—è Fondy

## ‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### 1. –ó–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
–î–æ–¥–∞–π—Ç–µ –≤ `.env.local`:
```env
# Fondy Payment Settings
FONDY_MERCHANT_ID=your_merchant_id
FONDY_SECRET_KEY=your_secret_key
```

### 2. –û—Ç—Ä–∏–º–∞–Ω–Ω—è –∫–ª—é—á—ñ–≤ Fondy
1. –ó–∞—Ä–µ—î—Å—Ç—Ä—É–π—Ç–µ—Å—å –Ω–∞ [Fondy](https://fondy.eu/)
2. –°—Ç–≤–æ—Ä—ñ—Ç—å –º–µ—Ä—á–∞–Ω—Ç –∞–∫–∞—É–Ω—Ç
3. –û—Ç—Ä–∏–º–∞–π—Ç–µ Merchant ID —Ç–∞ Secret Key –≤ –æ—Å–æ–±–∏—Å—Ç–æ–º—É –∫–∞–±—ñ–Ω–µ—Ç—ñ
4. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ callback URL: `https://yourdomain.com/api/payment/fondy/callback`

## üîß –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

### –í—ñ–¥–∂–µ—Ç Fondy
```javascript
window.fondy("#fondy-ua-checkout", {
  options: {
    methods: ['card', 'banklinks_eu', 'local_methods'],
    default_country: 'UA',
    button: true
  },
  params: {
    merchant_id: 1397120,
    amount: 59900, // –≤ –∫–æ–ø—ñ–π–∫–∞—Ö
    currency: 'UAH',
    order_desc: '–ú—É–∑–∏—á–Ω–µ –ø—Ä–∏–≤—ñ—Ç–∞–Ω–Ω—è',
    order_id: 'order_123',
    response_url: 'https://yourdomain.com/payment/success',
    server_callback_url: 'https://yourdomain.com/api/payment/fondy/callback',
    signature: 'calculated_signature'
  },
  messages: {
    ua: { 
      card_number: '–ù–æ–º–µ—Ä –∫–∞—Ä—Ç–∏',
      order_desc: '–û–ø–∏—Å –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è'
    }
  }
})
```

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—ñ–¥–ø–∏—Å—É
```javascript
function createFondySignature(data, secretKey) {
  const sortedKeys = Object.keys(data).sort()
  const signatureString = sortedKeys
    .map(key => `${key}=${data[key]}`)
    .join('|')
  
  const stringToSign = `${secretKey}|${signatureString}`
  return crypto.createHash('sha1').update(stringToSign).digest('hex')
}
```

### Callback –æ–±—Ä–æ–±–∫–∞
```javascript
// POST /api/payment/fondy/callback
{
  "order_id": "order_123",
  "order_status": "approved", // approved, declined, processing
  "amount": 59900,
  "currency": "UAH",
  "payment_id": "12345",
  "signature": "calculated_signature"
}
```

## üîç –°—Ç–∞—Ç—É—Å–∏ –ø–ª–∞—Ç–µ–∂—ñ–≤

### Fondy ‚Üí –ù–∞—à—ñ —Å—Ç–∞—Ç—É—Å–∏
- `approved` ‚Üí `success`
- `declined`, `expired`, `reversed` ‚Üí `failed`
- `processing`, `created` ‚Üí `pending`

## üéØ –ü–µ—Ä–µ–≤–∞–≥–∏ Fondy

### ‚úÖ –©–æ –ø–æ–∫—Ä–∞—â–∏–ª–æ—Å—è
1. **–ö—Ä–∞—â–∏–π –≤—ñ–¥–∂–µ—Ç** - —Å—É—á–∞—Å–Ω–∏–π UI/UX –¥–ª—è —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
2. **–ë—ñ–ª—å—à–µ –º–µ—Ç–æ–¥—ñ–≤ –æ–ø–ª–∞—Ç–∏** - –∫–∞—Ä—Ç–∏, –±–∞–Ω–∫—ñ–≤—Å—å–∫—ñ –ø–µ—Ä–µ–∫–∞–∑—ñ, –ª–æ–∫–∞–ª—å–Ω—ñ –º–µ—Ç–æ–¥–∏
3. **–ü—Ä–æ—Å—Ç—ñ—à–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è** - –º–µ–Ω—à–µ –∫–æ–¥—É, –±—ñ–ª—å—à–µ –º–æ–∂–ª–∏–≤–æ—Å—Ç–µ–π
4. **–ö—Ä–∞—â–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞** - —É–∫—Ä–∞—ó–Ω—Å—å–∫–∞ –ª–æ–∫–∞–ª—ñ–∑–∞—Ü—ñ—è —Ç–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞
5. **–ù–∞–¥—ñ–π–Ω—ñ—Å—Ç—å** - —Å—Ç–∞–±—ñ–ª—å–Ω–∞ —Ä–æ–±–æ—Ç–∞ —Ç–∞ —à–≤–∏–¥–∫–∞ –æ–±—Ä–æ–±–∫–∞

### üìä –ú–µ—Ç–æ–¥–∏ –æ–ø–ª–∞—Ç–∏
- üí≥ –ë–∞–Ω–∫—ñ–≤—Å—å–∫—ñ –∫–∞—Ä—Ç–∏ (Visa, MasterCard, Prostir)
- üè¶ –ë–∞–Ω–∫—ñ–≤—Å—å–∫—ñ –ø–µ—Ä–µ–∫–∞–∑–∏
- üì± Google Pay, Apple Pay
- üá∫üá¶ –õ–æ–∫–∞–ª—å–Ω—ñ —É–∫—Ä–∞—ó–Ω—Å—å–∫—ñ –º–µ—Ç–æ–¥–∏

## üîÑ –ó–≤–æ—Ä–æ—Ç–Ω–∞ —Å—É–º—ñ—Å–Ω—ñ—Å—Ç—å

### LiqPay –ø—ñ–¥—Ç—Ä–∏–º–∫–∞
–°—Ç–∞—Ä—ñ LiqPay –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –∑–∞–ª–∏—à–µ–Ω–æ –¥–ª—è –∑–≤–æ—Ä–æ—Ç–Ω–æ—ó —Å—É–º—ñ—Å–Ω–æ—Å—Ç—ñ:
- `components/modals/LiqPayEmbedModal.tsx`
- `app/api/payment/liqpay/`

### –ú—ñ–≥—Ä–∞—Ü—ñ—è —ñ—Å–Ω—É—é—á–∏—Ö –ø–ª–∞—Ç–µ–∂—ñ–≤
–í—Å—ñ —ñ—Å–Ω—É—é—á—ñ –ø–ª–∞—Ç–µ–∂—ñ –≤ –±–∞–∑—ñ –¥–∞–Ω–∏—Ö –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è –±–µ–∑ –∑–º—ñ–Ω. –ù–æ–≤—ñ –ø–ª–∞—Ç–µ–∂—ñ —Å—Ç–≤–æ—Ä—é—é—Ç—å—Å—è –∑ `paymentMethod: 'fondy'`.

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –¢–µ—Å—Ç–æ–≤–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞
–î–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –≤—ñ–¥–∂–µ—Ç—É Fondy —Å—Ç–≤–æ—Ä–µ–Ω–∞ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∞ —Ç–µ—Å—Ç–æ–≤–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞:
```
http://localhost:3000/test-fondy
```

### –õ–æ–∫–∞–ª—å–Ω–∞ —Ä–æ–∑—Ä–æ–±–∫–∞
```bash
# –ó–∞–ø—É—Å–∫ –¥–æ–¥–∞—Ç–∫–∞
npm run dev

# –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è API
curl -X POST "http://localhost:3000/api/payment/fondy" \
  -H "Content-Type: application/json" \
  -d '{"amount": 599, "description": "Test", "orderId": "test123"}'
```

### –î–µ–º–æ —Ä–µ–∂–∏–º
–í –ª–æ–∫–∞–ª—å–Ω—ñ–π —Ä–æ–∑—Ä–æ–±—Ü—ñ (HTTP) –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∫–ª—é—á–∞—î—Ç—å—Å—è –¥–µ–º–æ —Ä–µ–∂–∏–º –∑ —Å–∏–º—É–ª—è—Ü—ñ—î—é –ø–ª–∞—Ç–µ–∂—ñ–≤.

### –†–µ–∞–ª—å–Ω–∏–π –≤—ñ–¥–∂–µ—Ç
–î–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—ñ–¥–∂–µ—Ç—É Fondy –ø–æ—Ç—Ä—ñ–±–Ω–æ:
1. –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ HTTPS (–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ ngrok –∞–±–æ mkcert)
2. –î–æ–¥–∞—Ç–∏ —Ä–µ–∞–ª—å–Ω—ñ –∫–ª—é—á—ñ Fondy –≤ `.env.local`
3. –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ callback URL –≤ –æ—Å–æ–±–∏—Å—Ç–æ–º—É –∫–∞–±—ñ–Ω–µ—Ç—ñ Fondy

### –¢–µ—Å—Ç–æ–≤—ñ –∫–∞—Ä—Ç–∫–∏ Fondy
–î–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤ sandbox —Ä–µ–∂–∏–º—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ:
- **–£—Å–ø—ñ—à–Ω–∞ –æ–ø–ª–∞—Ç–∞**: 4444 5555 6666 1111
- **–í—ñ–¥—Ö–∏–ª–µ–Ω–∞ –æ–ø–ª–∞—Ç–∞**: 4444 1111 1111 1118
- **–¢–µ—Ä–º—ñ–Ω –¥—ñ—ó**: –±—É–¥—å-—è–∫–∞ –º–∞–π–±—É—Ç–Ω—è –¥–∞—Ç–∞
- **CVV**: –±—É–¥—å-—è–∫—ñ 3 —Ü–∏—Ñ—Ä–∏

## üìà –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏ –ø–ª–∞—Ç–µ–∂—ñ–≤
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
npm run db:stats

# –û—á–∏—Å—Ç–∫–∞ —Ç–µ—Å—Ç–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö
npm run db:clean
```

### –í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –ø–ª–∞—Ç–µ–∂—ñ–≤
–í—Å—ñ –ø–ª–∞—Ç–µ–∂—ñ Fondy –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ –∫–æ–ª–µ–∫—Ü—ñ—ó `payments` –∑ –ø–æ–ª–µ–º `fondyData` –¥–ª—è –ø–æ–≤–Ω–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –≤—ñ–¥ Fondy.

## üö® –í–∞–∂–ª–∏–≤—ñ –∑–∞—É–≤–∞–∂–µ–Ω–Ω—è

### –ë–µ–∑–ø–µ–∫–∞
1. **–°–µ–∫—Ä–µ—Ç–Ω–∏–π –∫–ª—é—á** - –Ω—ñ–∫–æ–ª–∏ –Ω–µ –≤–∏—Å—Ç–∞–≤–ª—è–π—Ç–µ FONDY_SECRET_KEY –ø—É–±–ª—ñ—á–Ω–æ
2. **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—ñ–¥–ø–∏—Å—É** - –∑–∞–≤–∂–¥–∏ –ø–µ—Ä–µ–≤—ñ—Ä—è–π—Ç–µ –ø—ñ–¥–ø–∏—Å –≤ callback
3. **HTTPS** - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Ç—ñ–ª—å–∫–∏ HTTPS –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—ñ

### –ü—Ä–æ–¥–∞–∫—à–µ–Ω
1. –ó–∞–º—ñ–Ω—ñ—Ç—å —Ç–µ—Å—Ç–æ–≤—ñ –∫–ª—é—á—ñ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ñ
2. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ callback URL
3. –£–≤—ñ–º–∫–Ω—ñ—Ç—å –ª–æ–≥—É–≤–∞–Ω–Ω—è —Ç–∞ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

## üìû –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

### Fondy
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è: https://docs.fondy.eu/
- –ü—ñ–¥—Ç—Ä–∏–º–∫–∞: https://fondy.eu/support/

### –ü—Ä–æ–µ–∫—Ç
- GitHub Issues –¥–ª—è —Ç–µ—Ö–Ω—ñ—á–Ω–∏—Ö –ø–∏—Ç–∞–Ω—å
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –≤ `/docs` –ø–∞–ø—Ü—ñ

---

üéâ **–ú—ñ–≥—Ä–∞—Ü—ñ—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø—ñ—à–Ω–æ!** Fondy –≥–æ—Ç–æ–≤–∏–π –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—ñ.
